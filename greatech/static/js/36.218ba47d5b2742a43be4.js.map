{"version":3,"sources":["webpack:///src/commponent/fileList/fileList.vue","webpack:///./src/commponent/fileList/fileList.vue?722a","webpack:///./src/commponent/fileList/fileList.vue"],"names":["fileList","name","data","header","Authorization","localStorage","getItem","tableData","pageNum","pageSize","totalNum","addFileShow","selectFileList","mounted","this","handleCurrentChange","filters","createDate","val","Interface","renderTime","slice","methods","_this2","params","search","axios","post","config","api","then","res","length","addFileWarp","otherFileChange","response","push","src","itemList","handleRemove","file","_this","map","item","index","splice","saveFile","_this3","FileList","filePath","status","$alert","msg","confirmButtonText","center","callback","action","handleExceed","files","$message","warning","fileList_fileList","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","type","size","on","click","_v","staticStyle","width","border","height","align","prop","label","min-width","show-overflow-tooltip","scopedSlots","_u","key","fn","scope","_s","_f","row","href","download","target","background","page-size","layout","total","current-page","current-change","update:currentPage","$event","update:current-page","title","visible","update:visible","drag","on-success","headers","limit","on-exceed","on-remove","multiple","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/36.218ba47d5b2742a43be4.js","sourcesContent":["<template>\n  <div>\n    <!--新增文件-->\n    <div class='new_addfile'>\n      <el-button type=\"primary\" size=\"mini\" @click='addFileWarp'>新增文件</el-button>\n    </div>\n\n    <!--表格-->\n    <el-table :data=\"tableData\" style=\"width: 100%\"\n              border\n              size='mini'\n              height=\"415\"\n    >\n      <el-table-column\n        align=\"center\"\n        type=\"index\"\n        width=\"60\">\n      </el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"name\"\n        label=\"标题\"\n        min-width='140'\n        show-overflow-tooltip\n      >\n      </el-table-column>\n      <el-table-column\n        align=\"center\"\n        label=\"创建时间\"\n        min-width='150'>\n        <template slot-scope=\"scope\">\n          <span>{{scope.row.createDate|createDate}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"250\" align=\"center\" >\n        <template slot-scope=\"scope\">\n          <a :href='scope.row.filePath' download  target=\"_blank\"><el-button type=\"text\" size=\"mini\">下载</el-button></a>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!--分页-->\n    <div class='page_fen'>\n      <el-pagination\n        background\n        :page-size=\"pageSize\"\n        layout=\"prev, pager, next\"\n        :total=\"totalNum\"\n        @current-change=\"handleCurrentChange\"\n        :current-page.sync=\"pageNum\">\n      </el-pagination>\n    </div>\n\n\n    <!--新增文件dialog-->\n    <el-dialog\n      title=\"上传文件\"\n      :visible.sync=\"addFileShow\"\n      width=\"500px\"\n      >\n      <!--文件上传-->\n      <div style='height: 300px;'>\n        <el-upload\n          class=\"upload-demo\"\n          drag\n          :on-success=\"otherFileChange\"\n          action=\"http://www.srm-greatech.com/gzSrm/system/file/upFile.do?fileType=other.path\"\n          :headers='header'\n          :limit=\"8\"\n          :on-exceed=\"handleExceed\"\n          :on-remove=\"handleRemove\"\n          multiple>\n          <i class=\"el-icon-upload\"></i>\n          <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n        </el-upload>\n      </div>\n      <div class='bth_warp'>\n        <el-button type=\"primary\" @click='saveFile'>保存</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  // 引入公共配置\n  import {config} from 'api/config.js';\n  //引入接口文件请求文件\n  import axios from 'api/axios.js'\n  // 引入公共方法\n  import Interface from 'api/Interface.js'\n\n\n  export default {\n    name:'fileList',\n    data(){\n      return {\n        // 文件上传设置token\n        header:{\n          Authorization: localStorage.getItem('token')\n        },\n        // 表格列表\n        tableData: [],\n        // 表格当前页面\n        pageNum:1,\n        // 请求数量\n        pageSize:8,\n        // 总数量\n        totalNum:0,\n        // 新增文件dialog\n        addFileShow:false,\n        // 上传后的文件列表\n        selectFileList:[]\n      }\n    },\n\n    mounted(){\n      // 分页获取文件列表\n      this.handleCurrentChange()\n    },\n    filters: {\n      // 创建时间\n      createDate:function(val){\n        return Interface.renderTime(val).slice(0,11)\n      }\n    },\n\n    methods:{\n      // 分页获取文件列表\n      handleCurrentChange(){\n       let params={\n          pageNum:this.pageNum,\n          pageSize:this.pageSize,\n          search:\"\"\n        }\n        axios.post(config.api,'/file/getFileList.do',params).then((res) => {\n          //加载完成，关闭遮罩层\n          console.log(res);\n          this.tableData=res.data\n          // 总条数\n          if(res.data.length>0){\n            this.totalNum=res.data[0].totalNum\n          }\n        })\n      },\n      // 点击新增文件\n      addFileWarp(){\n        this.addFileShow=true\n      },\n      // 文件上传成功\n      otherFileChange(response,fileList){\n        // 保存上传的文件itemList，删除的时候做对比\n        this.selectFileList.push({src:response.data[0],itemList:fileList})\n      },\n      // 删除文件\n      handleRemove(file){\n        // 对比上传的文件，判断具体删除哪个\n        var arr=this.selectFileList\n        let _this=this\n        arr.map(function(item,index){\n          if(item.itemList==file){\n            _this.selectFileList.splice(index,1)\n          }\n        })\n      },\n      // 保存文件\n      saveFile(){\n        let FileList=[]\n        this.selectFileList.map(function (item) {\n          FileList.push({\n            filePath:item.src\n          })\n        })\n        axios.post(config.api,'/file/saveFileList.do',FileList).then((res) => {\n          if(res.status=='0'){\n            this.$alert(res.msg, {\n              confirmButtonText: '确定',\n              center: true,\n              callback: action => {\n                // 清空文件上传列表\n                this.selectFileList=[]\n                // 隐藏上传弹框\n                this.addFileShow=false\n              }\n            })\n          }\n        })\n      },\n      // 上传超出数量\n      handleExceed(files, fileList) {\n        this.$message.warning(`当前最多选择 8 个文件`);\n      }\n    }\n  }\n</script>\n\n<style lang='stylus' scoped>\n\n  .new_addfile\n    margin-top:20px;\n    margin-bottom:20px;\n  .el-col-2\n    width: 8.33333%;\n    text-align: center;\n\n  .el-table >>> thead\n    color: #1f2d3d;\n\n  .el-table\n    border 1px solid #dddddd;\n    overflow hidden;\n\n  // 分页\n  .page_fen\n    width: 100%;\n    height: 60px;\n    background: #f5f5f5;\n    display flex\n    justify-content center\n    align-items: center\n    margin-top: 20px;\n    padding: 0px 20px;\n    box-sizing border-box;\n\n  .forbidden\n    color: #ff6666\n\n  .bth_warp\n    width:100%;\n    display flex\n    justify-content center\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/commponent/fileList/fileList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"new_addfile\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.addFileWarp}},[_vm._v(\"新增文件\")])],1),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\",\"size\":\"mini\",\"height\":\"415\"}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"type\":\"index\",\"width\":\"60\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"name\",\"label\":\"标题\",\"min-width\":\"140\",\"show-overflow-tooltip\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"创建时间\",\"min-width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"createDate\")(scope.row.createDate)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"250\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('a',{attrs:{\"href\":scope.row.filePath,\"download\":\"\",\"target\":\"_blank\"}},[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"}},[_vm._v(\"下载\")])],1)]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"page_fen\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"page-size\":_vm.pageSize,\"layout\":\"prev, pager, next\",\"total\":_vm.totalNum,\"current-page\":_vm.pageNum},on:{\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.pageNum=$event},\"update:current-page\":function($event){_vm.pageNum=$event}}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"上传文件\",\"visible\":_vm.addFileShow,\"width\":\"500px\"},on:{\"update:visible\":function($event){_vm.addFileShow=$event}}},[_c('div',{staticStyle:{\"height\":\"300px\"}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"drag\":\"\",\"on-success\":_vm.otherFileChange,\"action\":\"http://www.srm-greatech.com/gzSrm/system/file/upFile.do?fileType=other.path\",\"headers\":_vm.header,\"limit\":8,\"on-exceed\":_vm.handleExceed,\"on-remove\":_vm.handleRemove,\"multiple\":\"\"}},[_c('i',{staticClass:\"el-icon-upload\"}),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])])])],1),_vm._v(\" \"),_c('div',{staticClass:\"bth_warp\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveFile}},[_vm._v(\"保存\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b64c720a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/commponent/fileList/fileList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b64c720a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./fileList.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./fileList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./fileList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b64c720a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./fileList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b64c720a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/commponent/fileList/fileList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}