webpackJsonp([113],{"4Jve":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("bOdI"),l=a.n(n),i=a("T452"),r=a("pxwZ"),s=a("lStc"),c={name:"addToBeSumbit",data:function(){return{screen_data:{DateArr:[],startDate:"",endDate:"",pageNum:1,pageSize:8,totalNum:1,statementNumber:"",supplierName:"",search:""},form:[],deliveryProductList:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},detailedScreen:{search:"",purchaseOrder:"",productNumber:"",productName:""},detailList:{},uuid:"",status:"",dialogVisible:!1}},filters:{filterDate:function(e){if(e)return s.a.renderTime(e).slice(0,10)},filterPice:function(e){if(e)return s.a.RemainderPice(e)},filterState:function(e){return"0"==e?"待发起":"1"==e?"已发起":"2"==e?"财务确认":"4"==e?"已填入发票":"5"==e?"已生成账单":void 0},filterType:function(e){return""==e?"进货":"1"==e?"退货":"2"==e?"扣款":"3"==e?"补货":void 0}},mounted:function(){this.handleCurrentChange()},methods:{changeDate:function(){null!=this.screen_data.DateArr?(this.screen_data.startDate=this.screen_data.DateArr[0],this.screen_data.endDate=this.screen_data.DateArr[1]):(this.screen_data.startDate="",this.screen_data.endDate="")},onSelectAll:function(){this.$refs.selectTable.clearSelection()},handleSelectionChange:function(e,t){e.length>1?(this.$refs.selectTable.toggleRowSelection(e[0]),this.deliveryProductList=t):1==e.length?this.deliveryProductList=t:this.deliveryProductList=""},handleCurrentChange:function(e){var t=this;"screen"==e&&(this.screen_data.pageNum=1);var a=l()({search:this.screen_data.search,startDate:this.screen_data.startDate,endDate:this.screen_data.endDate,pageNum:this.screen_data.pageNum,pageSize:this.screen_data.pageSize,statementNumber:this.screen_data.statementNumber,supplierName:this.screen_data.supplierName},"search",this.screen_data.search.split("-").join(""));r.a.post(i.a.api,"/aStatement/getToBeSubmitList.do",a).then(function(e){0==e.status&&(t.form=e.data,e.data.length>0&&(t.screen_data.totalNum=e.data[0].totalNum))})},see:function(e){this.dialogVisible=!0,this.uuid=e.row.uuid,this.status=e.row.status,this.getDetailsList()},getDetailsList:function(){var e=this,t={purchaseOrder:this.detailedScreen.purchaseOrder,productNumber:this.detailedScreen.productNumber,productName:this.detailedScreen.productName,search:this.detailedScreen.search,uuid:this.uuid};r.a.post(i.a.api,"/aStatement/getGeneratedBillDetail.do",t).then(function(t){0==t.status?null==t.data?e.detailList={}:e.detailList=t.data:e.$alert(t.msg,{confirmButtonText:"确定",center:!0})})},downloadFiles:function(e){var t={uuid:e.row.uuid,search:"",purchaseOrder:"",productNumber:"",productName:""};r.a.getFile(i.a.noNeedLogionApi,"skip/exportGeneratedBillDetail.do",t).then(function(e){var t=document.createElement("a");t.href=window.URL.createObjectURL(new Blob([e])),t.target="_blank",t.download="对账单.xlsx",document.body.appendChild(t),t.click(),document.body.removeChild(t)})},financeAccount:function(e){var t=this;"pass"==e?this.deliveryProductList.status=1:"examine"==e&&(this.deliveryProductList.status=0),r.a.post(i.a.api,"/aStatement/updateBillStatus.do",this.deliveryProductList).then(function(e){0==e.status?t.$alert(e.msg,{confirmButtonText:"确定",center:!0,callback:function(e){t.handleCurrentChange()}}):t.$alert(e.msg,{confirmButtonText:"确定",center:!0})})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"inquiry_warp"},[a("el-form",{ref:"screen_data",attrs:{model:e.screen_data,inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"创建日期"}},[a("el-date-picker",{staticStyle:{width:"230px"},attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions},on:{change:e.changeDate},model:{value:e.screen_data.DateArr,callback:function(t){e.$set(e.screen_data,"DateArr",t)},expression:"screen_data.DateArr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"对账单号"}},[a("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入对账单号"},model:{value:e.screen_data.statementNumber,callback:function(t){e.$set(e.screen_data,"statementNumber",t)},expression:"screen_data.statementNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商名称"}},[a("el-input",{attrs:{placeholder:"请输入对账单号"},model:{value:e.screen_data.supplierName,callback:function(t){e.$set(e.screen_data,"supplierName",t)},expression:"screen_data.supplierName"}})],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"对账年月"}},[a("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"month","value-format":"yyyy-MM",placeholder:"选择年月"},model:{value:e.screen_data.search,callback:function(t){e.$set(e.screen_data,"search",t)},expression:"screen_data.search"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"Fuzzy",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleCurrentChange("screen")}}},[e._v("搜索")])],1),e._v(" "),a("el-button",{staticClass:"Fuzzy",attrs:{type:"success",size:"mini",disabled:""==this.deliveryProductList},on:{click:function(t){return e.financeAccount("pass")}}},[e._v("提交")]),e._v(" "),a("el-button",{staticClass:"Fuzzy",attrs:{type:"warning",size:"mini",disabled:""==this.deliveryProductList},on:{click:function(t){return e.financeAccount("examine")}}},[e._v("撤回")])],1)],1)],1),e._v(" "),a("el-table",{ref:"selectTable",staticStyle:{width:"100%"},attrs:{data:e.form,border:"",height:"415px",size:"mini"},on:{select:e.handleSelectionChange,"select-all":e.onSelectAll}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"对账单号",align:"center","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.statementNumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"供应商代码",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.erpno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"供应商名称",align:"center","min-width":"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.supplierName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"对账年月",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.billingTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"对账总金额",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.totalAmount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"税率",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.taxRate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建日期",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("filterDate")(t.row.createDate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.see(t)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.downloadFiles(t)}}},[e._v("下载")])]}}])})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.form.length>0,expression:"form.length>0"}],staticClass:"page_fen"},[a("el-pagination",{attrs:{background:"","page-size":e.screen_data.pageSize,layout:"prev, pager, next",total:e.screen_data.totalNum,"current-page":e.screen_data.pageNum},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.screen_data,"pageNum",t)},"update:current-page":function(t){return e.$set(e.screen_data,"pageNum",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"查看详情",visible:e.dialogVisible,width:"70%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"detailedScreen",attrs:{model:e.detailedScreen,size:"mini","label-width":"80px",inline:!0}},[a("el-form-item",{attrs:{label:"送货单号"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:e.detailedScreen.search,callback:function(t){e.$set(e.detailedScreen,"search",t)},expression:"detailedScreen.search"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"采购单号"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:e.detailedScreen.purchaseOrder,callback:function(t){e.$set(e.detailedScreen,"purchaseOrder",t)},expression:"detailedScreen.purchaseOrder"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物料编码"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:e.detailedScreen.productNumber,callback:function(t){e.$set(e.detailedScreen,"productNumber",t)},expression:"detailedScreen.productNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物料名称"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:e.detailedScreen.productName,callback:function(t){e.$set(e.detailedScreen,"productName",t)},expression:"detailedScreen.productName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getDetailsList}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.detailList.accoutStatementList,border:"",height:"315px",size:"mini"}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"数据来源",align:"center",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("filterType")(t.row.dataType)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"送货单号",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.deliveryNumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"采购单号",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.purchaseOrder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料编码",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.productNumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料名称",align:"center",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.productName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格型号",align:"center",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.specification))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.quantity))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"含税单价",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.price))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"含税金额",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.totalAmount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"扣款金额",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.deductionAmount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发生日期",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("filterDate")(t.row.createDate)))])]}}])})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-form",{ref:"detailList",attrs:{model:e.detailList,size:"mini","label-width":"80px",inline:!0}},[a("el-form-item",{attrs:{label:"账单总金额（含税）","label-width":"100px"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:e.detailList.taxableAmount,callback:function(t){e.$set(e.detailList,"taxableAmount",t)},expression:"detailList.taxableAmount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"入库总金额(含税)","label-width":"100px"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:e.detailList.totalAmount,callback:function(t){e.$set(e.detailList,"totalAmount",t)},expression:"detailList.totalAmount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"扣款"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:e.detailList.tdeductionAmount,callback:function(t){e.$set(e.detailList,"tdeductionAmount",t)},expression:"detailList.tdeductionAmount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"退货金额"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:e.detailList.returnGoodAmount,callback:function(t){e.$set(e.detailList,"returnGoodAmount",t)},expression:"detailList.returnGoodAmount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"总收货数量","label-width":"100px"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:e.detailList.treceiveCount,callback:function(t){e.$set(e.detailList,"treceiveCount",t)},expression:"detailList.treceiveCount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"总退货数量","label-width":"100px"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:e.detailList.treturnGoodCount,callback:function(t){e.$set(e.detailList,"treturnGoodCount",t)},expression:"detailList.treturnGoodCount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"对账退回说明","label-width":"100px"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:e.detailList.returnBillRemark,callback:function(t){e.$set(e.detailList,"returnBillRemark",t)},expression:"detailList.returnBillRemark"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,o,!1,function(e){a("AtwM")},"data-v-13a288af",null);t.default=u.exports},AtwM:function(e,t){}});
//# sourceMappingURL=113.a120816ac06cf26523db.js.map