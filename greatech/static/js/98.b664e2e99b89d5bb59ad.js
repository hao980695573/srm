webpackJsonp([98],{aORr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("Dd8w"),a=i.n(s),r=i("T452"),l=i("pxwZ"),n=i("uUlv"),o={data:function(){return{active:1,SupplierList:{SelectSupplier:[],backSupplierList:[]},RoleList:{SelectRole:[],backRoleList:[]},user:{selectUser:[],backUserList:[]},form:{title:"",introduction:"",content:""},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],introduction:[{required:!0,message:"请输入描述",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]}}},mounted:function(){this.getSupplierList(),this.getRoleList()},computed:a()({},Object(n.c)(["supplierUUid"])),methods:{getSupplierList:function(){var e=this,t={uuid:this.supplierUUid,companyType:"",isNeedExamination:"",conditionContent:"",pageSize:3e3,pageNum:1};l.a.post(r.a.api,"/supplier/getSupplierList.do",t).then(function(t){if(0==t.status){var i=e;t.data.map(function(e){i.SupplierList.backSupplierList.push({label:e.companyName,key:e.erpno})})}else e.$alert(t.msg,{confirmButtonText:"确定",center:!0})})},nextStep1:function(){this.active=2},getRoleList:function(){var e=this;l.a.post(r.a.api,"/role/getRoleList.do",{name:""}).then(function(t){if(0==t.status){var i=e;t.data.map(function(e){i.RoleList.backRoleList.push({label:e.name,key:e.uuid,item:e})})}else e.$alert(t.msg,{confirmButtonText:"确定",center:!0})})},nextStep2:function(){this.active=3,this.getUserList()},previousStep2:function(){this.active=1},getUserList:function(){var e=this;this.user.selectUser=[],this.user.backUserList=[];var t={erpno:this.SupplierList.SelectSupplier,role:this.RoleList.SelectRole,content:""};l.a.post(r.a.api,"/message/getReablePeople.do",t).then(function(t){var i=e;0==t.status?t.data.map(function(e,t){i.user.backUserList.push({label:e.username+"("+e.name+")",key:e.username})}):e.$alert(t.msg,{confirmButtonText:"确定",center:!0})})},nextStep3:function(){this.active=4},previousStep3:function(){this.active=2},publication:function(){var e=this;this.$refs.form.validate(function(t){if(t){var i={title:e.form.title,introduction:e.form.introduction,content:e.form.content,reablePeople:String(e.user.selectUser),reableRole:String(e.RoleList.SelectRole),reableSupplier:String(e.SupplierList.SelectSupplier)};l.a.post(r.a.api,"/message/addMessage.do",i).then(function(t){0==t.status?e.$alert(t.msg,{confirmButtonText:"确定",center:!0,callback:function(t){e.user.selectUser=[],e.RoleList.SelectRole=[],e.SupplierList.SelectSupplier=[],e.form.title="",e.form.introduction="",e.form.content="",e.active=1}}):e.$alert(t.msg,{confirmButtonText:"确定",center:!0})})}})},previousStep:function(){this.active=3}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"step_warp"},[i("el-steps",{attrs:{active:e.active,"finish-status":"success","align-center":""}},[i("el-step",{attrs:{title:"选择供应商"}}),e._v(" "),i("el-step",{attrs:{title:"选择角色"}}),e._v(" "),i("el-step",{attrs:{title:"选择用户"}}),e._v(" "),i("el-step",{attrs:{title:"填写内容"}})],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.active,expression:"active==1"}],staticClass:"chuansuokuang_warp"},[i("div",{staticClass:"chuansuo"},[i("el-transfer",{attrs:{filterable:"",titles:["可选供应商","已选供应商"],data:e.SupplierList.backSupplierList},model:{value:e.SupplierList.SelectSupplier,callback:function(t){e.$set(e.SupplierList,"SelectSupplier",t)},expression:"SupplierList.SelectSupplier"}})],1),e._v(" "),i("div",{staticClass:"xiayibu"},[i("el-button",{attrs:{type:"success"},on:{click:e.nextStep1}},[e._v("下一步")])],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==e.active,expression:"active==2"}],staticClass:"chuansuokuang_warp"},[i("div",{staticClass:"chuansuo"},[i("el-transfer",{attrs:{filterable:"",titles:["可选角色","已选角色"],data:e.RoleList.backRoleList},model:{value:e.RoleList.SelectRole,callback:function(t){e.$set(e.RoleList,"SelectRole",t)},expression:"RoleList.SelectRole"}})],1),e._v(" "),i("div",{staticClass:"xiayibu"},[i("el-button",{staticStyle:{"margin-right":"40px"},attrs:{type:"danger"},on:{click:e.previousStep2}},[e._v("上一步")]),e._v(" "),i("el-button",{attrs:{type:"success"},on:{click:e.nextStep2}},[e._v("下一步")])],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3==e.active,expression:"active==3"}],staticClass:"chuansuokuang_warp"},[i("div",{staticClass:"chuansuo"},[i("el-transfer",{attrs:{filterable:"",titles:["可选用户","已选用户"],data:e.user.backUserList},model:{value:e.user.selectUser,callback:function(t){e.$set(e.user,"selectUser",t)},expression:"user.selectUser"}})],1),e._v(" "),i("div",{staticClass:"xiayibu"},[i("el-button",{staticStyle:{"margin-right":"40px"},attrs:{type:"danger"},on:{click:e.previousStep3}},[e._v("上一步")]),e._v(" "),i("el-button",{attrs:{type:"success"},on:{click:e.nextStep3}},[e._v("下一步")])],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:4==e.active,expression:"active==4"}],staticClass:"chuansuokuang_warp"},[i("div",{staticClass:"content_warp"},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"简介",prop:"introduction"}},[i("el-input",{attrs:{placeholder:"请输入描述"},model:{value:e.form.introduction,callback:function(t){e.$set(e.form,"introduction",t)},expression:"form.introduction"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"内容描述",prop:"content"}},[i("el-input",{attrs:{type:"textarea",rows:15,placeholder:"请输入内容",resize:"none"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),e._v(" "),i("div",{staticClass:"confirmPublication"},[i("el-button",{staticStyle:{"margin-right":"40px"},attrs:{type:"danger"},on:{click:e.previousStep}},[e._v("上一步")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.publication}},[e._v("确定发布")])],1)],1)])])},staticRenderFns:[]};var u=i("VU/8")(o,c,!1,function(e){i("mVY6")},"data-v-24ce9706",null);t.default=u.exports},mVY6:function(e,t){}});
//# sourceMappingURL=98.b664e2e99b89d5bb59ad.js.map