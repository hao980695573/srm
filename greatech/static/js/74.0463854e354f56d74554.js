webpackJsonp([74],{QGdE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("Dd8w"),i=n.n(l),s=n("T452"),a=n("pxwZ"),r=n("uUlv"),o={name:"addReplenishment",data:function(){return{addReplenState:!1,screen:{item:"",startPsNo:"",endPsNo:"",bilNo:""},manufacturerList:[],addFormList:[],selectReplenlist:[],defineReplenlist:[]}},mounted:function(){this.getSupplierRole()},computed:i()({},Object(r.c)(["supplierUUid"])),methods:{addReplenStateShow:function(){this.addReplenState=!0},getSupplierRole:function(){var e=this,t={uuid:this.supplierUUid,pageSize:1e3,pageNum:1};a.a.post(s.a.api,"/supplier/getSupplierList.do",t).then(function(t){if(0==t.status){e.manufacturerList=t.data;for(var n=0;n<e.manufacturerList.length;n++)e.manufacturerList[n].uuid==e.supplierUUid&&(e.screen.item=e.manufacturerList[n])}else e.$alert(t.msg,{confirmButtonText:"确定",center:!0})})},getReplenishment:function(){var e=this,t={erpno:this.screen.item.erpno,startPsNo:this.screen.startPsNo,endPsNo:this.screen.endPsNo,bilNo:this.screen.bilNo};a.a.post(s.a.api,"/replenishment/getBeReplenishmentList.do",t).then(function(t){if(0==t.status){if(e.addFormList=t.data,e.defineReplenlist.length>0){var n=e;n.addFormList.map(function(t,l){for(var i=0;i<n.defineReplenlist.length;i++)if(t.uuid==n.defineReplenlist[i].uuid){setTimeout(function(){e.$refs.tableData.toggleRowSelection(t)},200);break}})}}else e.$alert(t.msg,{confirmButtonText:"确定",center:!0})})},handleSelectionChange:function(e){this.selectReplenlist=e},saveRelenishment:function(){this.selectReplenlist.map(function(e){e.quantity=e.qty-e.replenishedQty}),this.defineReplenlist=this.selectReplenlist,this.addReplenState=!1,this.screen.startPsNo="",this.screen.endPsNo="",this.addFormList=[]},delItem:function(e){this.defineReplenlist.splice(e.$index,1)},Savelist:function(){var e=this,t=[];this.defineReplenlist.map(function(e){t.push({psNo:e.psNo,item:e.itm,wh:e.wh,whName:e.whname,productNumber:e.prdno,productName:e.prdname,characteristics:e.prdmark,unit:e.unit,psQuantity:e.qty,price:e.up,taxRate:e.taxrto,purchaseOrder:e.bilno,replenishedQty:e.replenishedQty,quantity:e.quantity,estItem:e.estItem})});var n={erpno:this.screen.item.erpno,supplierName:this.screen.item.companyName,remark:"",rmProductList:t,receivingUnit:"广正模具塑胶有限公司"};a.a.post(s.a.api,"/replenishment/addReplenishment.do",n).then(function(t){0==t.status?e.$alert(t.msg,{confirmButtonText:"确定",center:!0,callback:function(t){e.defineReplenlist=[]}}):e.$alert(t.msg,{confirmButtonText:"确定",center:!0})})}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"addWarp"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addReplenStateShow}},[e._v("新增")]),e._v(" "),n("el-button",{attrs:{type:"success",size:"mini",disabled:0==e.defineReplenlist.length},on:{click:e.Savelist}},[e._v("保存")])],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.defineReplenlist,border:"",height:"415px",size:"mini"}},[n("el-table-column",{attrs:{type:"index",align:"center",width:"50"}}),e._v(" "),n("el-table-column",{attrs:{label:"退货单号",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.psNo))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"品号",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.prdno))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"品名",align:"center","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.prdname))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"特征",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.prdmark))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"仓库",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.wh))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"单位",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.unit))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"数量",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("input",{directives:[{name:"model",rawName:"v-model",value:t.row.quantity,expression:"scope.row.quantity"}],staticClass:"input_class",attrs:{type:"text"},domProps:{value:t.row.quantity},on:{input:function(n){n.target.composing||e.$set(t.row,"quantity",n.target.value)}}})]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.delItem(t)}}},[e._v("\n          删除\n        ")])]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:"新增",visible:e.addReplenState,width:"1200px"},on:{"update:visible":function(t){e.addReplenState=t}}},[n("el-form",{attrs:{model:e.screen,"label-width":"80px",inline:!0,size:"mini"}},[n("el-form-item",{attrs:{label:"厂商","label-width":"50px"}},[n("el-select",{staticStyle:{width:"200px"},attrs:{"value-key":"uuid",filterable:"",placeholder:"请选择厂商",disabled:0!=e.defineReplenlist.length},model:{value:e.screen.item,callback:function(t){e.$set(e.screen,"item",t)},expression:"screen.item"}},e._l(e.manufacturerList,function(e){return n("el-option",{key:e.uuid,attrs:{label:e.companyName,value:e}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"转入单号"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.screen.startPsNo,expression:"screen.startPsNo"}],staticClass:"screen_number",attrs:{type:"text"},domProps:{value:e.screen.startPsNo},on:{input:function(t){t.target.composing||e.$set(e.screen,"startPsNo",t.target.value)}}}),e._v(" -- "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.screen.endPsNo,expression:"screen.endPsNo"}],staticClass:"screen_number",attrs:{type:"text"},domProps:{value:e.screen.endPsNo},on:{input:function(t){t.target.composing||e.$set(e.screen,"endPsNo",t.target.value)}}})]),e._v(" "),n("el-form-item",{attrs:{label:"订单号"}},[n("el-input",{model:{value:e.screen.bilNo,callback:function(t){e.$set(e.screen,"bilNo",t)},expression:"screen.bilNo"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.getReplenishment}},[e._v("搜索")])],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.saveRelenishment}},[e._v("确定新增")])],1)],1),e._v(" "),n("el-table",{ref:"tableData",staticStyle:{width:"100%"},attrs:{data:e.addFormList,border:"",height:"415px",size:"mini"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{type:"index",align:"center",width:"50"}}),e._v(" "),n("el-table-column",{attrs:{label:"退货单号",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.psNo))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"订单号",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.bilno))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"品号",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.prdno))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"品名","show-overflow-tooltip":"",align:"center","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.prdname))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"特征",align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.prdmark))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"仓库",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.wh))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"单位",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.unit))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"退货数",align:"center",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.qty))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"已补数",align:"center",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.replenishedQty))])]}}])})],1)],1)],1)},staticRenderFns:[]};var c=n("VU/8")(o,u,!1,function(e){n("Smd9")},"data-v-4f78e990",null);t.default=c.exports},Smd9:function(e,t){}});
//# sourceMappingURL=74.0463854e354f56d74554.js.map