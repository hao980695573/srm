{"version":3,"sources":["webpack:///src/commponent/addPromotionBill/addPromotionBill.vue","webpack:///./src/commponent/addPromotionBill/addPromotionBill.vue?b41a","webpack:///./src/commponent/addPromotionBill/addPromotionBill.vue"],"names":["addPromotionBill","name","data","screen_data","deliveryNumber","form","arrivalDate","tableData","CountState","errIndex","entryEumber","submitState","fullscreenLoading","computed","extends_default","Object","vuex_esm","filters","filtersCount","val","Interface","Remainder","filtersDate","renderTime","slice","filterIsGift","methods","getList","_this2","this","params","axios","post","config","api","then","res","status","username","deliveryProductList","map","item","warehouse","moment_default","format","endOf","month","startOf","count","quantity","$alert","msg","confirmButtonText","center","watchCount","i","length","saveBth","_this3","stockDate","Date","receivingUnit","currency","useOfDepartmentName","erpno","remark","stockProductList","callback","action","deliveryDate","stockNumber","addPromotionBill_addPromotionBill","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","inline","size","label","placeholder","nativeOn","keyup","$event","type","indexOf","_k","keyCode","key","value","$$v","$set","expression","_v","on","click","readonly","label-position","staticStyle","width","value-format","rows","resize","disabled","directives","rawName","modifiers","fullscreen","lock","border","element-loading-background","height","align","prop","min-width","scopedSlots","_u","fn","scope","_s","_f","row","isGift","line-height","padding-left","box-sizing","outline","domProps","input","target","composing","show-overflow-tooltip","blur","$index","font-size","color","specification","unit","purchaseDate","purchaseOrder","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/46.9cee023605b464f6583b.js","sourcesContent":["<template>\n  <div>\n    <!--搜索-->\n    <div class='inquiry_warp'>\n      <el-form ref=\"screen_data\" :model=\"screen_data\" label-width=\"80px\" :inline=\"true\" size='mini'>\n        <el-form-item label=\"送货单号\">\n          <el-input v-model=\"screen_data.deliveryNumber\" placeholder=\"请输入送货单号\" @keyup.enter.native='getList'></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" class='Fuzzy' @click='getList'>搜索</el-button>\n        </el-form-item>\n        <el-form-item label=\"进货单号\">\n          <el-input v-model=\"entryEumber\" placeholder=\"空\" readonly></el-input>\n        </el-form-item>\n      </el-form>\n    </div>\n    <!--显示订单基础信息-->\n    <div class='baseWarp'>\n      <div class='headerWarp'>\n        <el-form ref=\"form\" :model=\"form\" label-width=\"80px\" size=\"mini\" label-position=\"right\" :inline=\"true\">\n          <el-form-item label=\"送货日期\">\n            <el-date-picker\n              style='width: 100%'\n              v-model=\"form.deliveryDate\"\n              type=\"date\"\n              readonly\n              placeholder=\"选择日期\">\n            </el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"到货日期\">\n            <el-date-picker\n              style='width: 100%'\n              v-model=\"arrivalDate\"\n              value-format='yyyy-MM-dd'\n              type=\"date\"\n              placeholder=\"选择日期\">\n            </el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"收货单位\">\n            <el-input v-model=\"form.receivingUnit\" readonly style='width:190px'></el-input>\n          </el-form-item>\n          <el-form-item label=\"供货商\">\n            <el-input v-model=\"form.supplierName\" readonly style='width:190px'></el-input>\n          </el-form-item>\n          <el-form-item label=\"币种\">\n            <el-input v-model=\"form.currency\" readonly style='width:100px'></el-input>\n          </el-form-item>\n          <div>\n            <el-form-item label=\"备注\">\n              <el-input\n                type=\"textarea\"\n                :rows=\"2\"\n                style='width:470px'\n                placeholder=\"请输入内容\"\n                resize=\"none\"\n                v-model=\"form.remark\">\n              </el-input>\n            </el-form-item>\n            <el-form-item>\n              <!--保存-->\n              <div class='save'>\n                <el-button type=\"primary\" size=\"small\" @click='saveBth' :disabled='tableData.length==\"0\"'>保存</el-button>\n              </div>\n\n            </el-form-item>\n          </div>\n        </el-form>\n      </div>\n    </div>\n    <!--表格-->\n    <el-table :data=\"tableData\" style=\"width: 100%\"\n              v-loading.fullscreen.lock=\"fullscreenLoading\"\n              border\n              element-loading-background=\"rgba(0, 0, 0, 0.8)\"\n              height='415'\n              size='mini'\n    >\n      <el-table-column\n        align=\"center\"\n        type=\"index\"\n        width=\"55\">\n      </el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"productNumber\"\n        label=\"品号\"\n        width='100'>\n      </el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"productName\"\n        label=\"品名\"\n        min-width='170'>\n      </el-table-column>\n      <el-table-column\n        align=\"center\"\n        label=\"是否赠品\"\n        width='80'>\n        <template slot-scope=\"scope\">\n          <span>{{scope.row.isGift|filterIsGift}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        align=\"center\"\n        label=\"仓位\"\n        width='90'>\n        <template slot-scope=\"scope\">\n          <input type=\"text\" v-model=\"scope.row.warehouse\" style='width:100%;line-height: 20px;padding-left:5px;box-sizing:border-box;outline: none'>\n        </template>\n      </el-table-column>\n      <el-table-column\n        align=\"center\"\n        label=\"送货数量\"\n        width='90'>\n        <template slot-scope=\"scope\">\n          <span>{{scope.row.quantity|filtersCount}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        align=\"center\"\n        label=\"收货数量\"\n        show-overflow-tooltip\n        width='90'>\n        <template slot-scope=\"scope\">\n          <input type=\"text\" v-model=\"scope.row.count\" style='width:100%;line-height: 20px;padding-left:5px;box-sizing:border-box;outline: none' @blur=\"watchCount\">\n          <div style='font-size:9px;color:red' v-show='!CountState&&errIndex==scope.$index'>收货数大于送货数</div>\n        </template>\n      </el-table-column>\n      <el-table-column\n        align=\"center\"\n        label=\"规格\"\n        min-width='150'>\n        <template slot-scope=\"scope\">\n          <span>{{scope.row.specification}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        align=\"center\"\n        label=\"单位\"\n        width='70'>\n        <template slot-scope=\"scope\">\n          <span>{{scope.row.unit}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        align=\"center\"\n        label=\"采购日期\"\n        show-overflow-tooltip\n        width=\"100\">\n        <template slot-scope=\"scope\">\n          <span>{{scope.row.purchaseDate|filtersDate}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        align=\"center\"\n        label=\"采购单号\"\n        width='110'>\n        <template slot-scope=\"scope\">\n          <span>{{scope.row.purchaseOrder}}</span>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\n  // 引入公共配置\n  import {config} from 'api/config.js';\n  //引入接口文件请求文件\n  import axios from 'api/axios.js'\n  // 引入公共方法\n  import Interface from 'api/Interface.js'\n  // 时间转换\n  import moment from 'moment';\n  // 引入vuex\n  import {mapState} from 'Vuex'\n\n\n  export default {\n    name: 'addPromotionBill',\n    data() {\n      return {\n        screen_data: {\n          deliveryNumber: ''\n        },\n        form: {},\n        // 到货日期\n        arrivalDate:'',\n        // 表格\n        tableData: [],\n        // 收到数量是否大于送货数量\n        CountState:true,\n        // 哪个超出数量\n        errIndex:'',\n        // 保存成功后回显进货单号\n        entryEumber:'',\n        // 禁止重复提交\n        submitState:true,\n        // 加载图标\n        fullscreenLoading:false\n\n      }\n    },\n    computed:{\n      ...mapState(['username'])\n    },\n    filters:{\n      filtersCount:function(val){\n        return Interface.Remainder(val)\n      },\n      filtersDate:function(val){\n        if(val){\n          return Interface.renderTime(val).slice(0,10)\n        }\n      },\n      filterIsGift(val){\n        if(val=='0'){\n          return \"否\"\n        }else{\n          return '是'\n        }\n      }\n    },\n    methods: {\n      // 获取列表\n      getList() {\n        const params = {\n          deliveryNumber: this.screen_data.deliveryNumber\n        }\n        axios.post(config.api, '/stock/getDeliveryDetailByNumber.do', params).then((res) => {\n          if (res.status == 0) {\n            if(res.data==null){\n              // 清除缓存\n              this.form = {}\n              this.arrivalDate=''\n              this.tableData = []\n            }else{\n              this.form = res.data\n\n              // 针对这两个账户名设置默认仓位\n              if(this.username=='11484'){\n                res.data.deliveryProductList.map((item)=>{\n                  item.warehouse='S06'\n                })\n              }if(this.username=='00042'){\n                res.data.deliveryProductList.map((item)=>{\n                  item.warehouse='S05'\n                })\n              }\n              this.tableData = res.data.deliveryProductList\n              // 到货日期 判断是今天否是最后一个月并且超过下午2点，是跳到下个月的第一天\n              if(moment().format(\"YYYY-MM-DD HH:mm\")>=moment().endOf('month').format(\"YYYY-MM-DD\")+\" \"+\"14:00\"){\n                // 下个月1号\n                this.arrivalDate=moment().month(moment().month() + 1).startOf('month').format(\"YYYY-MM-DD\")\n              }else{\n                this.arrivalDate=moment().format(\"YYYY-MM-DD\")\n              }\n\n              // 后台需要修改对象里的字段值\n              res.data.deliveryProductList.map(function (item) {\n                item.count = item.quantity\n              })\n            }\n          } else {\n            this.$alert(data.msg, {\n              confirmButtonText: '确定',\n              center: true\n            })\n          }\n        })\n      },\n      // 收货数量判断\n      watchCount(){\n        for(var i=0;i<this.tableData.length;i++){\n          if(this.tableData[i].count>this.tableData[i].quantity){\n            this.CountState=false\n            this.errIndex=i\n            break\n          }else{\n            this.CountState=true\n          }\n        }\n      },\n      // 保存\n      saveBth() {\n        // 是否允许提交\n        if(this.submitState){\n          // 禁止重复提交\n          this.submitState=false\n          // 加载显示\n          this.fullscreenLoading=true\n\n          // 校验通过\n          if(this.CountState){\n            const params = {\n              // 到货日期\n              stockDate:new Date(this.arrivalDate+\" \"+\"00:00:00\"),\n              receivingUnit: this.form.receivingUnit,\n              currency: this.form.currency,\n              useOfDepartmentName:this.form.useOfDepartmentName,\n              deliveryNumber:this.form.deliveryNumber,\n              erpno:this.form.erpno,\n              remark:this.form.remark,\n              stockProductList:this.tableData\n            }\n            axios.post(config.api, '/stock/saveStock.do', params).then((res) => {\n              // 允许提交\n              this.submitState=true\n              // 关闭加载显示\n              this.fullscreenLoading=false\n\n              if (res.status == 0) {\n                let _this=this\n                _this.$alert('保存成功', {\n                  confirmButtonText: '确定',\n                  center: true,\n                  callback: action => {\n                    // 清除数据\n                    this.form.deliveryDate=''\n                    this.form.receivingUnit=''\n                    this.form.currency=''\n                    this.arrivalDate=''\n                    this.form.useOfDepartmentName=''\n                    this.screen_data.deliveryNumber=''\n                    this.form.erpno=''\n                    this.form.remark=''\n                    this.tableData=[]\n                    // 回显进货单号\n                    this.entryEumber=res.data.stockNumber\n                  }\n                })\n              }else{\n                this.$alert(res.msg, {\n                  confirmButtonText: '确定',\n                  center: true\n                })\n              }\n            })\n          }\n        }\n      }\n    }\n  }\n</script>\n\n<style lang='stylus' scoped>\n  .inquiry_warp {\n    width: 100%;\n    margin-top: 20px;\n  }\n\n  .baseWarp\n    width 100%\n    border-bottom: 1px solid #DDD;\n\n  .headerWarp\n    width 100%\n\n  .save\n    margin-top 8px;\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/commponent/addPromotionBill/addPromotionBill.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"inquiry_warp\"},[_c('el-form',{ref:\"screen_data\",attrs:{\"model\":_vm.screen_data,\"label-width\":\"80px\",\"inline\":true,\"size\":\"mini\"}},[_c('el-form-item',{attrs:{\"label\":\"送货单号\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入送货单号\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.getList($event)}},model:{value:(_vm.screen_data.deliveryNumber),callback:function ($$v) {_vm.$set(_vm.screen_data, \"deliveryNumber\", $$v)},expression:\"screen_data.deliveryNumber\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{staticClass:\"Fuzzy\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.getList}},[_vm._v(\"搜索\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"进货单号\"}},[_c('el-input',{attrs:{\"placeholder\":\"空\",\"readonly\":\"\"},model:{value:(_vm.entryEumber),callback:function ($$v) {_vm.entryEumber=$$v},expression:\"entryEumber\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"baseWarp\"},[_c('div',{staticClass:\"headerWarp\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\",\"size\":\"mini\",\"label-position\":\"right\",\"inline\":true}},[_c('el-form-item',{attrs:{\"label\":\"送货日期\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"readonly\":\"\",\"placeholder\":\"选择日期\"},model:{value:(_vm.form.deliveryDate),callback:function ($$v) {_vm.$set(_vm.form, \"deliveryDate\", $$v)},expression:\"form.deliveryDate\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"到货日期\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"value-format\":\"yyyy-MM-dd\",\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.arrivalDate),callback:function ($$v) {_vm.arrivalDate=$$v},expression:\"arrivalDate\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"收货单位\"}},[_c('el-input',{staticStyle:{\"width\":\"190px\"},attrs:{\"readonly\":\"\"},model:{value:(_vm.form.receivingUnit),callback:function ($$v) {_vm.$set(_vm.form, \"receivingUnit\", $$v)},expression:\"form.receivingUnit\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"供货商\"}},[_c('el-input',{staticStyle:{\"width\":\"190px\"},attrs:{\"readonly\":\"\"},model:{value:(_vm.form.supplierName),callback:function ($$v) {_vm.$set(_vm.form, \"supplierName\", $$v)},expression:\"form.supplierName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"币种\"}},[_c('el-input',{staticStyle:{\"width\":\"100px\"},attrs:{\"readonly\":\"\"},model:{value:(_vm.form.currency),callback:function ($$v) {_vm.$set(_vm.form, \"currency\", $$v)},expression:\"form.currency\"}})],1),_vm._v(\" \"),_c('div',[_c('el-form-item',{attrs:{\"label\":\"备注\"}},[_c('el-input',{staticStyle:{\"width\":\"470px\"},attrs:{\"type\":\"textarea\",\"rows\":2,\"placeholder\":\"请输入内容\",\"resize\":\"none\"},model:{value:(_vm.form.remark),callback:function ($$v) {_vm.$set(_vm.form, \"remark\", $$v)},expression:\"form.remark\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('div',{staticClass:\"save\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.tableData.length==\"0\"},on:{\"click\":_vm.saveBth}},[_vm._v(\"保存\")])],1)])],1)],1)],1)]),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading.fullscreen.lock\",value:(_vm.fullscreenLoading),expression:\"fullscreenLoading\",modifiers:{\"fullscreen\":true,\"lock\":true}}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\",\"element-loading-background\":\"rgba(0, 0, 0, 0.8)\",\"height\":\"415\",\"size\":\"mini\"}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"type\":\"index\",\"width\":\"55\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"productNumber\",\"label\":\"品号\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"productName\",\"label\":\"品名\",\"min-width\":\"170\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"是否赠品\",\"width\":\"80\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"filterIsGift\")(scope.row.isGift)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"仓位\",\"width\":\"90\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(scope.row.warehouse),expression:\"scope.row.warehouse\"}],staticStyle:{\"width\":\"100%\",\"line-height\":\"20px\",\"padding-left\":\"5px\",\"box-sizing\":\"border-box\",\"outline\":\"none\"},attrs:{\"type\":\"text\"},domProps:{\"value\":(scope.row.warehouse)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(scope.row, \"warehouse\", $event.target.value)}}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"送货数量\",\"width\":\"90\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"filtersCount\")(scope.row.quantity)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"收货数量\",\"show-overflow-tooltip\":\"\",\"width\":\"90\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(scope.row.count),expression:\"scope.row.count\"}],staticStyle:{\"width\":\"100%\",\"line-height\":\"20px\",\"padding-left\":\"5px\",\"box-sizing\":\"border-box\",\"outline\":\"none\"},attrs:{\"type\":\"text\"},domProps:{\"value\":(scope.row.count)},on:{\"blur\":_vm.watchCount,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(scope.row, \"count\", $event.target.value)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.CountState&&_vm.errIndex==scope.$index),expression:\"!CountState&&errIndex==scope.$index\"}],staticStyle:{\"font-size\":\"9px\",\"color\":\"red\"}},[_vm._v(\"收货数大于送货数\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"规格\",\"min-width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.specification))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"单位\",\"width\":\"70\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.unit))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"采购日期\",\"show-overflow-tooltip\":\"\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"filtersDate\")(scope.row.purchaseDate)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"采购单号\",\"width\":\"110\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.purchaseOrder))])]}}])})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-872aa8e8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/commponent/addPromotionBill/addPromotionBill.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-872aa8e8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./addPromotionBill.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./addPromotionBill.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./addPromotionBill.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-872aa8e8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./addPromotionBill.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-872aa8e8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/commponent/addPromotionBill/addPromotionBill.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}