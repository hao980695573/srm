webpackJsonp([92],{L9kG:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("T452"),s=t("pxwZ"),a={name:"access",data:function(){return{menu:[],menusIds:[],rolesrech:{name:""},name:"",uuid:"",roleList:[],accessShow:!1}},mounted:function(){this.getUserList()},methods:{getUserList:function(){var e=this,n={name:this.rolesrech.name};s.a.post(i.a.api,"/role/getRoleList.do",n).then(function(n){e.roleList=n.data})},hanldaccessShow:function(e){this.englishName=e.englishName,this.name=e.name,this.uuid=e.uuid,this.accessShow=!0,this.loadData()},hanldaccessCose:function(){this.menusIds=[]},loadData:function(){var e={englishName:this.englishName,name:this.name},n=this;s.a.post(i.a.api,"/role/getRoleRouter.do",e).then(function(e){n.menu=e.data.allRouterList,e.data.currentRoleRouterList.map(function(e){n.menusIds.push(e.uuid),e.children.length>0&&e.children.map(function(e){n.menusIds.push(e.uuid)})})})},handleCheck:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=this;if(2==e){var i=0;t.menu[n].children.map(function(e){t.menusIds.indexOf(e.uuid)>-1&&(i+=1)}),i>0?t.menusIds.indexOf(t.menu[n].uuid)<0&&t.menusIds.push(t.menu[n].uuid):t.menusIds.indexOf(t.menu[n].uuid)>0&&t.menusIds.splice(t.menusIds.indexOf(t.menu[n].uuid),1)}else t.menusIds.indexOf(t.menu[n].uuid)>-1?t.menu[n].children.map(function(e){t.menusIds.findIndex(function(n){return n==e.uuid})<0&&t.menusIds.push(e.uuid)}):t.menu[n].children.map(function(e){t.menusIds.findIndex(function(n){return n==e.uuid})>-1&&t.menusIds.splice(t.menusIds.findIndex(function(n){return n==e.uuid}),1)})},hlandfailure:function(){var e=this,n=[],t=this.menusIds.length;this.menusIds.length>0?this.menusIds.map(function(a,u){u<t&&(n.push({selectRoleuuid:e.uuid,roleuuid:e.uuid,routeruuid:a}),u+1===t&&s.a.post(i.a.api,"/role/updateRoleRouter.do",n).then(function(n){e.$alert(n.msg,{confirmButtonText:"确定",center:!0,callback:function(n){e.accessShow=!1}})}))}):(n.push({selectRoleuuid:this.uuid,roleuuid:"",routeruuid:""}),s.a.post(i.a.api,"/role/updateRoleRouter.do",n).then(function(n){e.$alert(n.msg,{confirmButtonText:"确定",center:!0,callback:function(n){e.accessShow=!1}})}))}}},u={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",{staticClass:"inquiry_warp"},[t("el-form",{attrs:{"label-width":"auto",size:"mini",inline:!0}},[t("el-form-item",{attrs:{label:"角色","label-width":"80px"}},[t("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.rolesrech.name,callback:function(n){e.$set(e.rolesrech,"name",n)},expression:"rolesrech.name"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.getUserList}},[e._v("搜索")])],1)],1)],1),e._v(" "),t("div",{staticClass:"role_warp"},[t("el-table",{attrs:{data:e.roleList,border:"",size:"mini",height:"700px","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t("el-table-column",{attrs:{align:"center",type:"index",width:"60"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",prop:"name",label:"角色名称","min-width":"150"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",prop:"englishName",label:"英语名称","min-width":"100"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{attrs:{type:"primary",size:"mini",disabled:"ROLE_ADMIN"==n.row.englishName},on:{click:function(t){return e.hanldaccessShow(n.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"角色权限",visible:e.accessShow,width:"50%",top:"2.5%"},on:{"update:visible":function(n){e.accessShow=n},close:e.hanldaccessCose}},[t("div",{staticClass:"roleStatus"},[t("span",{staticClass:"role_title"},[e._v("角色：")]),e._v(" "),t("el-input",{attrs:{disabled:!0,size:"mini"},model:{value:e.name,callback:function(n){e.name=n},expression:"name"}})],1),e._v(" "),e._l(e.menu,function(n,i){return t("div",{directives:[{name:"show",rawName:"v-show",value:"false"==n.hidden,expression:'item.hidden=="false"'}],key:n.uuid,staticClass:"checkbox-table"},[[t("el-checkbox",{staticClass:"check1",staticStyle:{"font-weight":"600","margin-bottom":"15px"},attrs:{label:n.uuid},on:{change:function(n){return e.handleCheck(1,i)}},model:{value:e.menusIds,callback:function(n){e.menusIds=n},expression:"menusIds"}},[e._v("\n          "+e._s(n.meta.title)+"\n        ")]),e._v(" "),t("div",{staticStyle:{"margin-bottom":"20px"}},e._l(n.children,function(n){return t("div",{key:n.uuid,staticClass:"line-check",staticStyle:{display:"inline-block","margin-left":"20px","margin-bottom":"20px"}},[t("el-checkbox",{staticClass:"check2",attrs:{label:n.uuid},on:{change:function(n){return e.handleCheck(2,i)}},model:{value:e.menusIds,callback:function(n){e.menusIds=n},expression:"menusIds"}},[e._v("\n              "+e._s(n.meta.title)+"\n            ")])],1)}),0)]],2)}),e._v(" "),t("div",{staticClass:"assign",on:{click:e.hlandfailure}},[e._v("确定")])],2)],1)},staticRenderFns:[]};var l=t("VU/8")(a,u,!1,function(e){t("bDE5")},"data-v-3474c93d",null);n.default=l.exports},bDE5:function(e,n){}});
//# sourceMappingURL=92.c8f3faf7a80a7e1f1fe4.js.map