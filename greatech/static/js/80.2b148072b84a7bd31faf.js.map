{"version":3,"sources":["webpack:///src/common/main/main.vue","webpack:///./src/common/main/main.vue?355c","webpack:///./src/common/main/main.vue"],"names":["main","name","methods","tabClick","tab","this","$router","push","path","activeIndex","tabRemove","targetName","$store","state","userRole","commit","openTab","length","route","mounted","$route","title","meta","computed","extends_default","Object","vuex_esm","get","set","val","watch","to","from","flag","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","value","err","return","main_main","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","type","closable","on","tab-click","tab-remove","model","callback","$$v","expression","_l","item","index","key","label","_e","_v","keepAlive","directives","rawName","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"qLAmCAA,GACAC,KAAA,QACAC,SAEAC,SAFA,SAEAC,GACAC,KAAAC,QAAAC,MAAAC,KAAAH,KAAAI,eAGAC,UANA,SAMAC,GAEA,gBAAAN,KAAAO,OAAAC,MAAAC,UACA,QAAAH,GAAA,gDAAAA,EACA,YAEA,oBAAAN,KAAAO,OAAAC,MAAAC,UACA,QAAAH,GAAA,kCAAAA,EACA,YAEA,wBAAAN,KAAAO,OAAAC,MAAAC,UACA,QAAAH,GAAA,6BAAAA,EACA,YAGA,QAAAA,GAAA,gBAAAA,EACA,OAIAN,KAAAO,OAAAG,OAAA,cAAAJ,GACAN,KAAAI,cAAAE,GAEAN,KAAAW,SAAAX,KAAAW,QAAAC,QAAA,IACAZ,KAAAO,OAAAG,OAAA,mBAAAV,KAAAW,QAAAX,KAAAW,QAAAC,OAAA,GAAAC,OACAb,KAAAC,QAAAC,MAAAC,KAAAH,KAAAI,iBAKAU,QAtCA,WAwCAd,KAAAO,OAAAG,OAAA,cAMA,aAAAV,KAAAO,OAAAC,MAAAC,SACA,gDAAAT,KAAAe,OAAAZ,MAEAH,KAAAO,OAAAG,OAAA,YAAAG,MAAA,+CAAAjB,KAAA,0BAAAoB,MAAAhB,KAAAe,OAAAE,KAAAD,QACAhB,KAAAO,OAAAG,OAAA,qEAGAV,KAAAO,OAAAG,OAAA,YAAAG,MAAA,+CAAAjB,KAAA,0BAAAoB,MAAA,SACAhB,KAAAO,OAAAG,OAAA,YAAAG,MAAAb,KAAAe,OAAAZ,KAAAP,KAAAI,KAAAe,OAAAnB,KAAAoB,MAAAhB,KAAAe,OAAAE,KAAAD,QACAhB,KAAAO,OAAAG,OAAA,mBAAAV,KAAAe,OAAAZ,OAEA,iBAAAH,KAAAO,OAAAC,MAAAC,SACA,kCAAAT,KAAAe,OAAAZ,MAEAH,KAAAO,OAAAG,OAAA,YAAAG,MAAA,iCAAAjB,KAAA,mBAAAoB,MAAAhB,KAAAe,OAAAE,KAAAD,QACAhB,KAAAO,OAAAG,OAAA,uDAGAV,KAAAO,OAAAG,OAAA,YAAAG,MAAA,iCAAAjB,KAAA,mBAAAoB,MAAA,UACAhB,KAAAO,OAAAG,OAAA,YAAAG,MAAAb,KAAAe,OAAAZ,KAAAP,KAAAI,KAAAe,OAAAnB,KAAAoB,MAAAhB,KAAAe,OAAAE,KAAAD,QACAhB,KAAAO,OAAAG,OAAA,mBAAAV,KAAAe,OAAAZ,OAEA,WAAAH,KAAAO,OAAAC,MAAAC,SACA,6BAAAT,KAAAe,OAAAZ,KAEAH,KAAAO,OAAAG,OAAA,YAAAG,MAAA,4BAAAjB,KAAA,kBAAAoB,MAAAhB,KAAAe,OAAAE,KAAAD,SAGAhB,KAAAO,OAAAG,OAAA,YAAAG,MAAA,4BAAAjB,KAAA,kBAAAoB,MAAA,WACAhB,KAAAO,OAAAG,OAAA,YAAAG,MAAAb,KAAAe,OAAAZ,KAAAP,KAAAI,KAAAe,OAAAnB,KAAAoB,MAAAhB,KAAAe,OAAAE,KAAAD,QACAhB,KAAAO,OAAAG,OAAA,mBAAAV,KAAAe,OAAAZ,OAGA,gBAAAH,KAAAe,OAAAZ,MAEAH,KAAAO,OAAAG,OAAA,YAAAG,MAAA,eAAAjB,KAAA,OAAAoB,MAAAhB,KAAAe,OAAAE,KAAAD,QACAhB,KAAAO,OAAAG,OAAA,qCAGAV,KAAAO,OAAAG,OAAA,YAAAG,MAAA,eAAAjB,KAAA,OAAAoB,MAAA,WACAhB,KAAAO,OAAAG,OAAA,YAAAG,MAAAb,KAAAe,OAAAZ,KAAAP,KAAAI,KAAAe,OAAAnB,KAAAoB,MAAAhB,KAAAe,OAAAE,KAAAD,QACAhB,KAAAO,OAAAG,OAAA,mBAAAV,KAAAe,OAAAZ,QAMAe,SAAYC,OAEZC,OAAAC,EAAA,EAAAD,EAAA,cAEAT,QAJA,WAMA,OAAAX,KAAAO,OAAAC,MAAAG,SAEAP,aACAkB,IADA,WAEA,OAAAtB,KAAAO,OAAAC,MAAAJ,aAEAmB,IAJA,SAIAC,GACAxB,KAAAO,OAAAG,OAAA,mBAAAc,OAIAC,OACAV,OADA,SACAW,EAAAC,GAIA,SAAA3B,KAAAe,OAAAE,KAAAD,MAAA,CACA,IAAAY,GAAA,EADAC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAEA,QAAAC,EAAAC,EAAAC,IAAAnC,KAAAW,WAAAkB,GAAAI,EAAAC,EAAAE,QAAAC,MAAAR,GAAA,GACA,GADAI,EAAAK,MACA1C,OAAA8B,EAAA9B,KAAA,CACAI,KAAAO,OAAAG,OAAA,mBAAAgB,EAAAvB,MACAyB,GAAA,EACA,QANA,MAAAW,GAAAT,GAAA,EAAAC,EAAAQ,EAAA,aAAAV,GAAAK,EAAAM,QAAAN,EAAAM,SAAA,WAAAV,EAAA,MAAAC,GASAH,IACA5B,KAAAO,OAAAG,OAAA,YAAAG,MAAAa,EAAAvB,KAAAP,KAAA8B,EAAA9B,KAAAoB,MAAAhB,KAAAe,OAAAE,KAAAD,QACAhB,KAAAO,OAAAG,OAAA,mBAAAgB,EAAAvB,WC9JesC,GADEC,OAFjB,WAA0B,IAAAC,EAAA3C,KAAa4C,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,SAAmBF,EAAA,OAAAH,EAAAhC,QAAA,OAAAmC,EAAA,WAA+CG,OAAOC,KAAA,cAAAC,SAAA,IAAmCC,IAAKC,YAAAV,EAAA7C,SAAAwD,aAAAX,EAAAtC,WAAoDkD,OAAQjB,MAAAK,EAAA,YAAAa,SAAA,SAAAC,GAAiDd,EAAAvC,YAAAqD,GAAoBC,WAAA,gBAA2Bf,EAAAgB,GAAAhB,EAAA,iBAAAiB,EAAAC,GAA2C,OAAAf,EAAA,eAAyBgB,IAAAF,EAAAhE,KAAAqD,OAAqBc,MAAAH,EAAA5C,MAAApB,KAAAgE,EAAA/C,WAAwC,GAAA8B,EAAAqB,MAAA,GAAArB,EAAAsB,GAAA,KAAAnB,EAAA,OAAAA,EAAA,mBAAA9C,KAAAe,OAAAE,KAAAiD,UAAApB,EAAA,eAAAH,EAAAqB,MAAA,GAAArB,EAAAsB,GAAA,KAAAnB,EAAA,eAAwJqB,aAAavE,KAAA,OAAAwE,QAAA,SAAA9B,MAAA,KAAAtC,KAAAe,OAAAE,KAAAiD,UAAAR,WAAA,uCAAoH,MAEhwBW,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE7E,EACA8C,GATF,EAVA,SAAAgC,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/80.2b148072b84a7bd31faf.js","sourcesContent":["<template>\n  <div class='main'>\n    <!-- 此处放置el-tabs代码 -->\n    <div >\n      <el-tabs\n        v-model=\"activeIndex\"\n        type=\"border-card\"\n        closable\n        v-if=\"openTab.length\"\n        @tab-click='tabClick'\n        @tab-remove='tabRemove'\n      >\n        <el-tab-pane\n          :key=\"item.name\"\n          v-for=\"(item, index) in openTab\"\n          :label=\"item.title\"\n          :name=\"item.route\"\n        >\n        </el-tab-pane>\n      </el-tabs>\n    </div>\n    <div>\n      <!--点击el_tab切换路由需要缓存-->\n      <keep-alive>\n        <router-view v-if=\"this.$route.meta.keepAlive=='1'\"></router-view>\n      </keep-alive>\n      <router-view v-show=\"this.$route.meta.keepAlive=='0'\"></router-view>\n    </div>\n  </div>\n</template>\n\n<script>\n// Vuex语法糖\nimport {mapState} from 'Vuex'\n\nexport default {\n  name:'mains',\n  methods:{\n    //tab标签点击时，切换相应的路由\n    tabClick(tab){\n      this.$router.push({path: this.activeIndex});\n    },\n    //移除tab标签\n    tabRemove(targetName){\n      // 根据不同角色，首页不删\n      if(this.$store.state.userRole=='OWN_CLERK'){\n        if(targetName == '/'||targetName == '/financialManagement/financialReconciliation'){\n          return\n        }\n      }else if(this.$store.state.userRole=='OWN_WAREHOUSE'){\n        if(targetName == '/'||targetName == '/collectGoods/addPromotionBill'){\n          return\n        }\n      }else if(this.$store.state.userRole=='ROLE_ADMINPLANNER'){\n        if(targetName == '/'||targetName == '/purchase/orderScheduling'){\n          return\n        }\n      }else{\n        if(targetName == '/'||targetName == '/record/home'){\n          return\n        }\n      }\n\n      this.$store.commit('delete_tabs', targetName);\n      if (this.activeIndex === targetName) {\n        // 设置当前激活的路由\n        if (this.openTab && this.openTab.length >= 1) {\n          this.$store.commit('set_active_index', this.openTab[this.openTab.length - 1].route);\n          this.$router.push({path: this.activeIndex});\n        }\n      }\n    }\n  },\n  mounted () {\n    // 刷新页面时清空列表\n    this.$store.commit('add_tabs',0);\n    // 刷新时以当前路由做为tab加入tabs\n    // 当前路由不是首页时，添加首页以及另一页到store里，并设置激活状态\n    // 当当前路由是首页时，添加首页到store，并设置激活状态\n\n    // 根据用户角色进入不同\n    if(this.$store.state.userRole=='OWN_CLERK'){\n      if (this.$route.path == '/financialManagement/financialReconciliation') {\n        // 本部财务员默认路径\n        this.$store.commit('add_tabs', {route: '/financialManagement/financialReconciliation', name: 'financialReconciliation',title:this.$route.meta.title});\n        this.$store.commit('set_active_index', '/financialManagement/financialReconciliation');\n      } else {\n        // 本部财务员不是默认路径\n        this.$store.commit('add_tabs', {route: '/financialManagement/financialReconciliation' , name: 'financialReconciliation',title:'财务对账'});\n        this.$store.commit('add_tabs', {route: this.$route.path , name: this.$route.name,title:this.$route.meta.title});\n        this.$store.commit('set_active_index', this.$route.path);\n      }\n    }else if(this.$store.state.userRole=='OWN_WAREHOUSE'){\n      if (this.$route.path == '/collectGoods/addPromotionBill') {\n        // 本部仓库员默认路径\n        this.$store.commit('add_tabs', {route: '/collectGoods/addPromotionBill', name: 'addPromotionBill',title:this.$route.meta.title});\n        this.$store.commit('set_active_index', '/collectGoods/addPromotionBill');\n      } else {\n        // 本部仓库员不是默认路径\n        this.$store.commit('add_tabs', {route: '/collectGoods/addPromotionBill' , name: 'addPromotionBill',title:'新增进货单'});\n        this.$store.commit('add_tabs', {route: this.$route.path , name: this.$route.name,title:this.$route.meta.title});\n        this.$store.commit('set_active_index', this.$route.path);\n      }\n    }else if(this.$store.state.userRole=='PLANNER'){\n      if (this.$route.path == '/purchase/orderScheduling') {\n        // 计划人员默认路径\n        this.$store.commit('add_tabs', {route: '/purchase/orderScheduling', name: 'orderScheduling',title:this.$route.meta.title});\n      } else {\n        // 计划人员员不是默认路径\n        this.$store.commit('add_tabs', {route: '/purchase/orderScheduling' , name: 'orderScheduling',title:'采购订单排程'});\n        this.$store.commit('add_tabs', {route: this.$route.path , name: this.$route.name,title:this.$route.meta.title});\n        this.$store.commit('set_active_index', this.$route.path);\n      }\n    }else{\n      if (this.$route.path == '/record/home') {\n        // 默认路径\n        this.$store.commit('add_tabs', {route: '/record/home', name: 'home',title:this.$route.meta.title});\n        this.$store.commit('set_active_index', '/record/home');\n      } else {\n        // 不是默认路径\n        this.$store.commit('add_tabs', {route: '/record/home' , name: 'home',title:'基础档案管理'});\n        this.$store.commit('add_tabs', {route: this.$route.path , name: this.$route.name,title:this.$route.meta.title});\n        this.$store.commit('set_active_index', this.$route.path);\n\n      }\n    }\n\n  },\n  computed: {\n    // 是否tab切换的，用来控制路由是否缓存\n    ...mapState(['tabState']),\n    // 打开tab\n    openTab () {\n      // 返回打开的地址\n      return this.$store.state.openTab;\n    },\n    activeIndex:{\n      get () {\n        return this.$store.state.activeIndex;\n      },\n      set (val) {\n        this.$store.commit('set_active_index', val);\n      }\n    }\n  },\n  watch:{\n    '$route'(to,from){\n      //判断路由是否已经打开\n      //已经打开的 ，将其置为active\n      //未打开的，将其放入队列里\n      if(this.$route.meta.title!=null){\n        let flag = false;\n        for(let item of this.openTab){\n          if(item.name === to.name){\n            this.$store.commit('set_active_index',to.path)\n            flag = true;\n            break;\n          }\n        }\n        if(!flag){\n          this.$store.commit('add_tabs', {route: to.path, name: to.name,title:this.$route.meta.title});\n          this.$store.commit('set_active_index', to.path);\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style lang='stylus' scoped>\n  .main\n    position absolute\n    left: 210px;\n    top: 60px;\n    right: 0px;\n    bottom: 0px;\n    padding: 10px;\n    overflow scroll;\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/common/main/main.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('div',[(_vm.openTab.length)?_c('el-tabs',{attrs:{\"type\":\"border-card\",\"closable\":\"\"},on:{\"tab-click\":_vm.tabClick,\"tab-remove\":_vm.tabRemove},model:{value:(_vm.activeIndex),callback:function ($$v) {_vm.activeIndex=$$v},expression:\"activeIndex\"}},_vm._l((_vm.openTab),function(item,index){return _c('el-tab-pane',{key:item.name,attrs:{\"label\":item.title,\"name\":item.route}})}),1):_vm._e()],1),_vm._v(\" \"),_c('div',[_c('keep-alive',[(this.$route.meta.keepAlive=='1')?_c('router-view'):_vm._e()],1),_vm._v(\" \"),_c('router-view',{directives:[{name:\"show\",rawName:\"v-show\",value:(this.$route.meta.keepAlive=='0'),expression:\"this.$route.meta.keepAlive=='0'\"}]})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4c6e021e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/common/main/main.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4c6e021e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./main.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./main.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./main.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4c6e021e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./main.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4c6e021e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/common/main/main.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}