webpackJsonp([36],{gHwJ:function(e,t){},n4WQ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("T452"),n=a("pxwZ"),l=a("lStc"),s={name:"fileList",data:function(){return{header:{Authorization:localStorage.getItem("token")},tableData:[],pageNum:1,pageSize:8,totalNum:0,addFileShow:!1,selectFileList:[]}},mounted:function(){this.handleCurrentChange()},filters:{createDate:function(e){return l.a.renderTime(e).slice(0,11)}},methods:{handleCurrentChange:function(){var e=this,t={pageNum:this.pageNum,pageSize:this.pageSize,search:""};n.a.post(i.a.api,"/file/getFileList.do",t).then(function(t){e.tableData=t.data,t.data.length>0&&(e.totalNum=t.data[0].totalNum)})},addFileWarp:function(){this.addFileShow=!0},otherFileChange:function(e,t){this.selectFileList.push({src:e.data[0],itemList:t})},handleRemove:function(e){var t=this;this.selectFileList.map(function(a,i){a.itemList==e&&t.selectFileList.splice(i,1)})},saveFile:function(){var e=this,t=[];this.selectFileList.map(function(e){t.push({filePath:e.src})}),n.a.post(i.a.api,"/file/saveFileList.do",t).then(function(t){"0"==t.status&&e.$alert(t.msg,{confirmButtonText:"确定",center:!0,callback:function(t){e.selectFileList=[],e.addFileShow=!1}})})},handleExceed:function(e,t){this.$message.warning("当前最多选择 8 个文件")}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"new_addfile"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addFileWarp}},[e._v("新增文件")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",size:"mini",height:"415"}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"标题","min-width":"140","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("createDate")(t.row.createDate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:t.row.filePath,download:"",target:"_blank"}},[a("el-button",{attrs:{type:"text",size:"mini"}},[e._v("下载")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"page_fen"},[a("el-pagination",{attrs:{background:"","page-size":e.pageSize,layout:"prev, pager, next",total:e.totalNum,"current-page":e.pageNum},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"上传文件",visible:e.addFileShow,width:"500px"},on:{"update:visible":function(t){e.addFileShow=t}}},[a("div",{staticStyle:{height:"300px"}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":e.otherFileChange,action:"http://www.srm-greatech.com/gzSrm/system/file/upFile.do?fileType=other.path",headers:e.header,limit:8,"on-exceed":e.handleExceed,"on-remove":e.handleRemove,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])])],1),e._v(" "),a("div",{staticClass:"bth_warp"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveFile}},[e._v("保存")])],1)])],1)},staticRenderFns:[]};var r=a("VU/8")(s,o,!1,function(e){a("gHwJ")},"data-v-b64c720a",null);t.default=r.exports}});
//# sourceMappingURL=36.218ba47d5b2742a43be4.js.map