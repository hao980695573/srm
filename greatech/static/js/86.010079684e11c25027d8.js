webpackJsonp([86],{B4Vl:function(e,t){},P0oM:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Dd8w"),i=r.n(a),o=r("T452"),n=r("pxwZ"),l=r("/ksa"),u=r("lStc"),s=r("uUlv"),m=new(r("7blw").a),c={name:"normal",data:function(){var e=this;return{form:{deliveryNumber:"",printableQuantity:"",mpAmount:"",mpioQuantity:"",remark:"",dProductUuid:"",materialCodingName:"",materialCoding:"",quantity:"",deliveryCount:"",mpCount:"",opCount:"",issuanceDate:u.a.getToday("-"),qgPeriod:"",manufactureDate:u.a.getToday("-")},restaurants:[],materielList:[],PrintType:"",rules:{deliveryNumber:[{required:!0,message:"请输入送货单号",trigger:["blur","change"]}],deliveryCount:[{validator:function(t,r,a){return""===r?a(new Error("送货数不能为空")):/^[0-9]*[1-9][0-9]*$/.test(r)?Number(e.form.deliveryCount)>Number(e.form.printableQuantity)?a(new Error("送货数不能大于可打印数")):void a():a(new Error("只能输入整数"))},required:!0,trigger:"blur"}],mpAmount:[{validator:l.e,required:!0,trigger:"blur"}],mpioQuantity:[{validator:l.e,required:!0,trigger:"blur"}],issuanceDate:[{required:!0,message:"请选择日期",trigger:["change","blur"]}],materialCodingName:[{required:!0,message:"内容不能为空",trigger:["blur","change"]}],manufactureDate:[{required:!0,message:"请选择日期",trigger:["change","blur"]}],qgPeriod:[{required:!0,message:"请选择日期",trigger:["change","blur"]}]},selcetDeliveryNumber:"",erpno:""}},mounted:function(){this.getDeliveryNote(),this.changeBarCodeList([])},methods:i()({},Object(s.b)(["changeBarCodeList"]),{querySearch:function(e,t){var r=this.restaurants;t(e?r.filter(this.createFilter(e)):r)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},materielSearch:function(e,t){var r=this.materielList;t(e?r.filter(this.materielFilter(e)):r)},materielFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},getDeliveryNote:function(){var e=this;n.a.post(o.a.api,"/delivery/getDeliveryList.do",{uuid:"",search:"",startDate:"",endDate:"",pageNum:1,pageSize:1e3}).then(function(t){if(0==t.status){var r=[];t.data.map(function(e){r.push({value:e.deliveryNumber,uuid:e.uuid,erpno:e.erpno})}),e.restaurants=r}else e.$alert(t.msg,{confirmButtonText:"确定",center:!0})})},handleSelect:function(e){var t=this;this.selcetDeliveryNumber=e.value;var r={deliveryNumber:e.value,uuid:e.uuid};this.erpno=e.erpno,this.form.materialCodingName="",n.a.post(o.a.api,"/barcode/getDeliveryInfo.do",r).then(function(e){if(0==e.status){var r=[];e.data.deliveryProductList.map(function(e){r.push({value:e.productName,dproductUuid:e.uuid,quantity:e.quantity,bpCount:e.bpCount})}),t.materielList=r}else t.$alert(e.msg,{confirmButtonText:"确定",center:!0})})},materielSelect:function(e){var t=this;this.form.dproductUuid=e.dproductUuid,this.materielList.map(function(r){r.dproductUuid==e.dproductUuid&&(t.form.printableQuantity=e.quantity)})},mpAmountBlur:function(){this.form.mpCount="Infinity"==Math.ceil(this.form.deliveryCount/this.form.mpAmount)?0:Math.ceil(this.form.deliveryCount/this.form.mpAmount),""!=this.form.mpioQuantity&&this.opCountBlur()},opCountBlur:function(){this.form.opCount="Infinity"==Math.ceil(this.form.mpCount/this.form.mpioQuantity)?0:Math.ceil(this.form.mpCount/this.form.mpioQuantity)},generatingBarcode:function(e){var t=this;this.PrintType="label"==e?"label":"middle"==e?"middle":"accessories",this.$emit("PrintType",this.PrintType),this.$refs.form.validate(function(e){if(e){m.open();var r={deliveryNumber:t.form.deliveryNumber,printableQuantity:t.form.printableQuantity,mpAmount:t.form.mpAmount,mpioQuantity:t.form.mpioQuantity,remark:t.form.remark,dproductUuid:t.form.dproductUuid,materialCoding:t.form.materialCoding,deliveryCount:t.form.deliveryCount,mpCount:t.form.mpCount,opCount:t.form.opCount,issuanceDate:t.form.issuanceDate,erpno:t.erpno,qgPeriod:t.form.qgPeriod,manufactureDate:t.form.manufactureDate};n.a.post(o.a.api,"/barcode/addBarcodeInformation.do",r).then(function(e){0==e.status?(t.getBarcodeList(e.data),m.close()):t.$alert(e.msg,{confirmButtonText:"确定",center:!0,callback:function(e){m.close()}})})}})},getBarcodeList:function(e){var t=this,r={uuid:e,type:0};n.a.post(o.a.api,"/barcode/getBarcodeDetailList.do",r).then(function(e){0==e.status?(t.changeBarCodeList(e.data),t.$refs.form.resetFields(),t.form.remark="",t.form.mpCount="",t.form.zhengCount="",t.form.beiCount="",t.form.printableQuantity=""):t.$alert(e.msg,{confirmButtonText:"确定",center:!0})})}})},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register"},[r("div",{staticClass:"register_center"},[r("el-form",{ref:"form",staticClass:"register_center_center",attrs:{"label-width":"150px",model:e.form,rules:e.rules,size:"mini"}},[r("div",{staticClass:"register_center_left"},[r("el-form-item",{attrs:{label:"送货单号",prop:"deliveryNumber"}},[r("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{size:"small","fetch-suggestions":e.querySearch,placeholder:"请输入送货单号"},on:{select:e.handleSelect},model:{value:e.form.deliveryNumber,callback:function(t){e.$set(e.form,"deliveryNumber",t)},expression:"form.deliveryNumber"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"可打印数量"}},[r("el-input",{staticClass:"register_input",attrs:{size:"small",placeholder:"打印数量",readonly:""},model:{value:e.form.printableQuantity,callback:function(t){e.$set(e.form,"printableQuantity",t)},expression:"form.printableQuantity"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"最小包装量",prop:"mpAmount"}},[r("el-input",{staticClass:"register_input",attrs:{size:"small",placeholder:"请输入最小包装数",disabled:""==e.form.deliveryCount},on:{blur:e.mpAmountBlur},model:{value:e.form.mpAmount,callback:function(t){e.$set(e.form,"mpAmount",t)},expression:"form.mpAmount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"外箱含最小包装量",prop:"mpioQuantity"}},[r("el-input",{staticClass:"register_input",attrs:{size:"small",placeholder:"请输入外箱含最小包装数",disabled:""==e.form.deliveryCount},on:{blur:e.opCountBlur},model:{value:e.form.mpioQuantity,callback:function(t){e.$set(e.form,"mpioQuantity",t)},expression:"form.mpioQuantity"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"保质期",prop:"qgPeriod"}},[r("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.qgPeriod,callback:function(t){e.$set(e.form,"qgPeriod",t)},expression:"form.qgPeriod"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{staticClass:"register_input",attrs:{size:"small",placeholder:"请输入备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),r("div",{staticClass:"register_center_right"},[r("el-form-item",{attrs:{label:"物料编码",prop:"materialCodingName"}},[r("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{size:"small","fetch-suggestions":e.materielSearch,placeholder:"请输入物料编码"},on:{select:e.materielSelect},model:{value:e.form.materialCodingName,callback:function(t){e.$set(e.form,"materialCodingName",t)},expression:"form.materialCodingName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"送货数",prop:"deliveryCount"}},[r("el-input",{staticClass:"register_input",attrs:{size:"small",placeholder:"请输入送货数",disabled:""==e.form.printableQuantity},on:{blur:e.mpAmountBlur},model:{value:e.form.deliveryCount,callback:function(t){e.$set(e.form,"deliveryCount",t)},expression:"form.deliveryCount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"最小包装数"}},[r("el-input",{staticClass:"register_input",attrs:{size:"small",placeholder:"最小包装数",readonly:""},model:{value:e.form.mpCount,callback:function(t){e.$set(e.form,"mpCount",t)},expression:"form.mpCount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"外箱包装数",prop:"opCount"}},[r("el-input",{staticClass:"register_input",attrs:{size:"small",placeholder:"外箱包装数",readonly:""},model:{value:e.form.opCount,callback:function(t){e.$set(e.form,"opCount",t)},expression:"form.opCount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"送货日期",prop:"issuanceDate"}},[r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.issuanceDate,callback:function(t){e.$set(e.form,"issuanceDate",t)},expression:"form.issuanceDate"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"生产日期",prop:"manufactureDate"}},[r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"生产日期"},model:{value:e.form.manufactureDate,callback:function(t){e.$set(e.form,"manufactureDate",t)},expression:"form.manufactureDate"}})],1)],1)]),e._v(" "),r("div",{staticClass:"register_bth_warp"},[r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.generatingBarcode("label")}}},[e._v("生成条形码(100*70)")]),e._v(" "),r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.generatingBarcode("middle")}}},[e._v("生成条形码（100*60）")]),e._v(" "),r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.generatingBarcode("accessories")}}},[e._v("生成条形码（70*45）")])],1)],1)])},staticRenderFns:[]};var f=r("VU/8")(c,d,!1,function(e){r("B4Vl")},"data-v-391563ee",null);t.default=f.exports}});
//# sourceMappingURL=86.010079684e11c25027d8.js.map